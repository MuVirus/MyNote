# 工程
## 一、创建工程
创建工程命令为
```
dart create new_project
```
> [!注意]
> Dart 的包名/项目名只能使用 **小写字母、数字和下划线**，并且必须以字母开头，不能出现大写字母或连字符、空格等特殊字符。

# 语法核心
## 一、变量
### 1、late

late 修饰符有两种用法：
- 声明一个非空变量，但不在声明时初始化。
- 延迟初始化一个变量。

> [!notice]
> 如果一开始没有初始化late变量，那么使用前必须赋值

在声明时就初始化了`late`变量，那么就起到了延迟初始化`late`变量的作用了。只会在使用到`late`变量，才会初始化变量。

### 2、final / const

一个 final 变量只能设置一次，const 变量是编译时常量。（const 常量隐式包含了 final，也就是说 const 自带 final 的消息）
> [!注意]
> 实例变量 可以是 final 但不能是 const。

### 3、空安全

1. 不可空（**Non-nullable**）
```dart
int a = 5;
a = null;          // ❌ 编译期就报错
```

2. 可空（**Nullable**）
```dart
int? b = 5;
b = null;          // ✅ 允许
```

3. 空感知运算符
- `?.` 链式调用，空时短路返回 `null`
- `??` 空时给默认值
- `??=` 空时才赋值
- `!` **非空断言**：你向编译器保证“绝对非空”，运行时空了就抛异常

``` dart
int? x;
print(x?.toRadixString(16));  // null
print(x ?? 42);               // 42
x ??= 100;                    // 此时 x = 100
print(x!.toRadixString(16));  // 64，若 x 为 null 直接抛运行时异常
```

4. 延迟初始化关键字
- `late`：告诉编译器“我现在不赋值，但使用前一定非空”，运行时空了会抛 `LateInitializationError`。
- `late final`：只能赋值一次，常用于依赖注入或懒加载。

```dart
late String name;             // 先声明，稍后赋值
name = 'Tom';                 // 使用前必须赋过值
```

5. 列表/Map 的可空性

```dart
List<int> nums = [];        // 列表本身及其元素都不可空
List<int?> numsWithNull = [1, null];  // 元素可空
List<int>? nullableList;    // 列表本身可空，元素不可空
List<int?>? bothNullable;   // 列表和元素都可空
```

- `[]` 为空列表，内部完全没有元素。
- `<int>`表示元素是不可空的
- `<int?>`表示元素可空
- `List<xx>?`表示列表不可空的
- `List<xx>?`表示列表可空

6. required

required一般用在调用函数或者创建对象时必须传的参数。

- `required` 只用于**命名参数**。
- 如果参数类型是**不可空**的，又**没有默认值**，就必须 `required`。
- 如果参数类型是**可空**的（带 `?`），那就可以省掉 `required`，传不传都行。

## 二、内置类型

### 1、变量声明

分为`显示类型`、`dynamic`、`var`。

| 声明方式                           | 是否显式给出类型         | 编译期类型         | 运行期类型      | 初始化后能否再赋其它类型 | 典型场景                                       |
| ------------------------------ | ---------------- | ------------- | ---------- | ------------ | ------------------------------------------ |
| 显式类型<br>`int x = 10;`          | ✅ 明确写出           | 固定为 `int`     | 只能是 `int`  | ❌            | 绝大多数业务变量；可读性最好，IDE 提示最完整。                  |
| `var`<br>`var x = 10;`         | ❌（由初始值推断）        | 编译器推断为 `int`  | 只能是 `int`  | ❌            | 当右侧表达式已能唯一确定类型时，可少敲几个字。                    |
| `dynamic`<br>`dynamic x = 10;` | ✅ 明确写出 `dynamic` | 被视为 `dynamic` | 任意类型，运行时可变 | ✅            | 与 JavaScript 交互、反射、JSON 解析等极少数需要“彻底动态”的地方。 |
补充要点
1. `var` **不是**动态类型，只是“语法糖”。一旦初始化，其静态类型就固定下来，之后不能赋其它类型：
``` dart
var x = 1;
x = 'hello'; // 编译错误：A value of type 'String' can't be assigned to a variable of type 'int'.
```

2. `dynamic` 会**关闭**静态检查，写错成员名要等到运行时才抛 `NoSuchMethodError`：
``` dart
dynamic d = 1;
d.foo(); // 编译通过，运行时报错
```

3. 推荐顺序  
能写显式类型就写显式 → 若嫌啰嗦且右侧已能推断，可用 `var` → 只有真正需要动态化时才用 `dynamic`。

### 2、`num`类型
#### 1) int
整数值不大于 64 位，具体取决于平台。在本机平台上，值可以是 -2<sup>63</sup> 到 2<sup>63 - 1</sup>。
#### 2) double
64 位（双精度）浮点数，如 IEEE 754 标准所指定。

### 3、String
Dart 字符串（对象）包含一系列 UTF-16 代码单元。您可以使用单引号或双引号来创建字符串：`String`
#### 1) 插值
1. 使用`+`连接
2. 使用`$`引用变量
3. 使用`${expression}`执行`expression`表达式
#### 2) 原生`Raw`
如果要保留全部信息（包括表达式或者其他符号），在引号前加入`r`。
``` dart
var s = r'In a raw string, not even \n gets special treatment.';
// In a raw string, not even \n gets special treatment.
```
### 3) 表示方式
单行表示可以用`'`、`"`，多行表示可以用`'''`、`"""`。
### 4、bool
只有两个值`true`、`false`。
Dart是强类型语言，`bool`和`num`不能混用。
### 5、List
在 Dart 中，数组是 `List` 对象，所以大多数人只是称它们为列表。`空列表`用`[]`表示。
### 6、Set
Dart 中的集合是独特元素的无序集合。`空集合`用`{}`表示。

### 7、Map
在映射中，每个元素都是键值对。一对中的每个键都与一个值相关联，键和值都可以是任何类型的对象。每个键只能出现一次，但相同的值可以与多个不同的键相关联。`空Map`用`Map()`表示。

### 8、Record


## 三、控制流
1. 箭头函数（=> expression） • 语法糖：只能包 **单表达式**，**不能出现语句块**（没有花括号）。  
    • 返回值就是表达式的值，隐式 `return`。  
    • 如果函数体需要多行或局部变量，请改用 `{ ... }` 块体。
## 四、函数
